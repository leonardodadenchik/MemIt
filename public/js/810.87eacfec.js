"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[810],{3691:function(e,t){const s=location.origin.replace(/^http/,"ws"),a=new WebSocket(s);t["Z"]=a},3566:function(e,t){t["Z"]={cards:void 0,situations:void 0}},5810:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var a=s(3396),r=s(7139);const i=e=>((0,a.dD)("data-v-81e75bd6"),e=e(),(0,a.Cn)(),e),n={class:"game"},d={class:"timerDiv"},c={class:"playersZone"},l={key:0},o=["id"],m={class:"usedCardDivenge"},u=["onClick"],y=i((()=>(0,a._)("p",null,"VOTE",-1))),g=[y],p=["src"],h={class:"situationZone"},v=(0,a.Uk)(" Ситуація:"),f=i((()=>(0,a._)("br",null,null,-1))),S={class:"cardsZone"},C=["onClick","src"],k=["src"];function _(e,t,s,i,y,_){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",d,[(0,a._)("h1",null,"Залишилось часу на хід: "+(0,r.zw)(this.timerStep)+"с.",1)]),(0,a._)("div",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.playerList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"player",key:e},[t+1!=this.myId?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",{id:`position__${t+1>this.myId?t:t+1}`},[(0,a._)("h2",null,(0,r.zw)(e.name),1),(0,a._)("div",m,["selecting..."==e.cardStatus||y.isVoted?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:"voteDivenge",onClick:e=>_.sendVote(t+1)},g,8,u)),"selecting..."!=e.cardStatus?((0,a.wg)(),(0,a.iD)("img",{key:1,src:_.imgesUrlGetter(e.cardStatus)},null,8,p)):(0,a.kq)("",!0)])],8,o)])):(0,a.kq)("",!0)])))),128))]),(0,a._)("div",h,[v,f,(0,a.Uk)((0,r.zw)(y.situations[y.gameStep-1]),1)]),(0,a._)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.cards,(e=>((0,a.wg)(),(0,a.iD)("img",{key:e,onClick:t=>_.sendCard(e),class:"cardImg",src:_.imgesUrlGetter(e)},null,8,C)))),128))]),(0,a._)("img",{src:_.imgesUrlGetter(y.mySelectedCard),class:"myCard"},null,8,k)])}var w=s(3566),b=s(3691),I={data(){return{playerList:[{name:"df",cardStatus:"selecting..."}],situations:w.Z.situations,cards:w.Z.cards,timerStep:20,gameStep:1,timerId:void 0,isVoted:!1,mySelectedCard:""}},methods:{timesTimer(e=30){clearTimeout(this.timerId),this.timerStep=e-1,this.timerId=setInterval((()=>{this.timerStep>0?this.timerStep-=1:clearTimeout(this.timerId)}),1e3)},myselfUpdatingFunc(){b.Z.onmessage=e=>{switch(e=JSON.parse(e.data),e.content){case"card_status":this.playerList.map(((t,s)=>(t.cardStatus=e.cards[s],t)));break;case"next_step":this.playerList.map((e=>e.cardStatus="selecting...")),this.gameStep+=1,this.timerStep=0,this.isVoted=!1;var t=Array.from(document.getElementsByClassName("myCard"));t[0].style.bottom="-300px";var s=Array.from(document.getElementsByClassName("cardsZone"));s[0].style.bottom="-20px",this.timesTimer();break;case"end":this.$router.push({name:"play"}),alert(`Game end! Winner is ${""!=e.winner?e.winner:"nobody"}`);break}}},cardsRecalcilating(){var e=Array.from(document.getElementsByClassName("cardsZone"));e[0].style.left=(100-(5*this.cards.length+2))/2.8+"vw"},sendCard:async function(e){await b.Z.send(JSON.stringify({content:"card",card:e,player_id:this.myId,room_code:this.code}));var t=Array.from(document.getElementsByClassName("cardsZone"));t[0].style.bottom="-300px",this.mySelectedCard=e;var s=Array.from(document.getElementsByClassName("myCard"));s[0].style.bottom="25px",this.cards=this.cards.filter((t=>t!=e)),this.cardsRecalcilating()},sendVote(e){this.isVoted=!0,b.Z.send(JSON.stringify({content:"vote",vote:e,room_code:this.code}))},imgesUrlGetter(e){return`${location.origin}/images_library.${e}`}},props:{propPlayerNameList:{type:Array,required:!0},code:{type:String,required:!0},myId:{type:[String,Number],required:!0}},created(){var e=setInterval((()=>{0!=b.Z.readyState&&(clearInterval(e),this.myselfUpdatingFunc())}),100);this.playerList=this.propPlayerNameList.map((e=>({name:e,cardStatus:"selecting..."})))},mounted(){this.timesTimer();var e=setInterval((()=>{var t=Array.from(document.getElementsByClassName("cardImg"));t[0].offsetWidth>0&&(clearInterval(e),t.forEach((e=>{e.offsetWidth>e.offsetHeight?e.classList.add("revetsedCard"):e.classList.add("verticalCard")})),this.cardsRecalcilating())}),100)}},Z=s(89);const D=(0,Z.Z)(I,[["render",_],["__scopeId","data-v-81e75bd6"]]);var N=D}}]);
//# sourceMappingURL=810.87eacfec.js.map