"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[82],{3691:function(e,t){const i=(location.origin.replace(/^http/,"ws")+":8814/").replace(":3000","").replace(":8080",""),s=new WebSocket(i);t["Z"]=s},3566:function(e,t){t["Z"]={cards:void 0,situations:void 0}},7082:function(e,t,i){i.r(t),i.d(t,{default:function(){return Z}});var s=i(3396),r=i(7139),a=i(9242);const n=e=>((0,s.dD)("data-v-0cafccf8"),e=e(),(0,s.Cn)(),e),c={class:"game"},d={class:"timerDiv"},l={class:"playersZone"},o={key:0},m=["id"],u=["onClick"],p=["src"],h={class:"situationZone"},g=(0,s.Uk)(" Ситуація:"),y=n((()=>(0,s._)("br",null,null,-1))),v={class:"cardsZone"},f=["onClick","src"];function S(e,t,i,n,S,k){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",d,[(0,s._)("h1",null,"Move time: "+(0,r.zw)(this.timerStep),1)]),(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(S.playerList,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"player",key:e},[t+1!=this.myId?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",{id:`position__${t+1>this.myId?t:t+1}`},[(0,s._)("h2",null,(0,r.zw)(e.name),1),"selecting..."==e.cardStatus||S.isVoted?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e=>k.sendVote(t+1)}," Vote ",8,u)),"selecting..."!=e.cardStatus?((0,s.wg)(),(0,s.iD)("img",{key:1,src:k.imgesUrlGetter(e.cardStatus)},null,8,p)):(0,s.kq)("",!0)],8,m)])):(0,s.kq)("",!0)])))),128))]),(0,s._)("div",h,[g,y,(0,s.Uk)((0,r.zw)(S.situations[S.gameStep-1]),1)]),(0,s.wy)((0,s._)("div",v,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(S.cards,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e},[(0,s._)("img",{onClick:t=>k.sendCard(e),class:"cardImg",src:k.imgesUrlGetter(e)},null,8,f)])))),128))],512),[[a.F8,"selecting..."==this.playerList[Number(this.myId)-1].cardStatus]])])}var k=i(3566),w=i(3691),_={data(){return{playerList:[{name:"df",cardStatus:"selecting..."}],situations:k.Z.situations,cards:k.Z.cards,timerStep:20,gameStep:1,timerId:void 0,isVoted:!1}},methods:{timesTimer(e=30){clearTimeout(this.timerId),this.timerStep=e-1,this.timerId=setInterval((()=>{this.timerStep>0?this.timerStep-=1:clearTimeout(this.timerId)}),1e3)},myselfUpdatingFunc(){w.Z.onmessage=e=>{switch(e=JSON.parse(e.data),e.content){case"card_status":this.playerList.map(((t,i)=>(t.cardStatus=e.cards[i],t)));break;case"next_step":this.playerList.map((e=>e.cardStatus="selecting...")),this.gameStep+=1,this.timerStep=0,this.isVoted=!1,this.timesTimer();break;case"end":this.$router.push({name:"play"}),alert(`Game end! Winner is ${""!=e.winner?e.winner:"nobody"}`);break}}},sendCard(e){console.log(e),w.Z.send(JSON.stringify({content:"card",card:e,player_id:this.myId,room_code:this.code})),this.cards=this.cards.filter((t=>t!=e))},sendVote(e){this.isVoted=!0,w.Z.send(JSON.stringify({content:"vote",vote:e,room_code:this.code}))},imgesUrlGetter(e){return`http://localhost:3000/images_library/${e}`}},props:{propPlayerNameList:{type:Array,required:!0},code:{type:String,required:!0},myId:{type:[String,Number],required:!0}},created(){var e=setInterval((()=>{0!=w.Z.readyState&&(clearInterval(e),this.myselfUpdatingFunc())}),100);this.playerList=this.propPlayerNameList.map((e=>({name:e,cardStatus:"selecting..."})))},mounted(){this.timesTimer();var e=Array.from(document.getElementsByClassName("cardImg")),t=setInterval((()=>{e[0].offsetWidth>0&&(clearInterval(t),e.forEach((e=>{e.offsetWidth/e.offsetHeight>1&&(e.width=.7*e.width)})))}),100)}},I=i(89);const b=(0,I.Z)(_,[["render",S],["__scopeId","data-v-0cafccf8"]]);var Z=b}}]);
//# sourceMappingURL=82.5a8dce65.js.map